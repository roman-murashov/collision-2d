var width=2*document.body.clientWidth,height=2*document.body.clientHeight,canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),fps=60,frameTime=1e3/fps,getRandomInt=function(t,i){return Math.floor(Math.random()*(i-t))+t},getDegree=function(t){return t/Math.PI*180},getRadian=function(t){return t*Math.PI/180},getDistance=function(t,i,e,n){var o=t-e,a=i-n;return Math.sqrt(o*o+a*a)},debounce=function(t,i,e){var n;t.addEventListener(i,function(t){clearTimeout(n),n=setTimeout(function(){e(t)},500)},!1)},canvasResize=function(){width=2*document.body.clientWidth,height=2*document.body.clientHeight,canvas.width=width,canvas.height=height,canvas.style.width=width/2+"px",canvas.style.height=height/2+"px"};debounce(window,"resize",function(){canvasResize()}),canvasResize();var movingBallObjArr=[],movingballNum=20,lastTimeRender=+new Date;ctx.lineWidth=4;var movingBallObj=function(t,i){this.t=0,this.x=t,this.y=i,this.v=getRandomInt(2,10),this.r=getRandomInt(20,40),this.moveX=0,this.moveY=0,this.orientation=getRadian(getRandomInt(0,360))};movingBallObj.prototype.speculateMovePoint=function(){this.moveX=this.x+Math.cos(this.orientation)*this.v,this.moveY=this.y+Math.sin(this.orientation)*this.v},movingBallObj.prototype.getOrientation=function(){this.orientation=Math.atan2(this.moveY-this.y,this.moveX-this.x)},movingBallObj.prototype.collisionDetection=function(){},movingBallObj.prototype.move=function(){this.t+=frameTime,this.x=this.moveX,this.y=this.moveY},movingBallObj.prototype.render=function(){ctx.beginPath(),ctx.arc(this.x,this.y,this.r,0,Math.PI/180,!0),ctx.stroke(),ctx.beginPath(),ctx.moveTo(this.x,this.y),ctx.lineTo(this.x+Math.cos(this.orientation)*this.r*1.5,this.y+Math.sin(this.orientation)*this.r*1.5),ctx.stroke()};var render=function(){ctx.clearRect(0,0,width,height);for(var t=0;t<movingBallObjArr.length;t++)movingBallObjArr[t].speculateMovePoint(),movingBallObjArr[t].getOrientation(),movingBallObjArr[t].collisionDetection(),movingBallObjArr[t].move(),movingBallObjArr[t].render()},renderloop=function(){var t=+new Date;requestAnimationFrame(renderloop),frameTime>t-lastTimeRender||(render(),lastTimeRender=+new Date)};renderloop();for(var i=0;movingballNum>i;i++)movingBallObjArr[i]=new movingBallObj(getRandomInt(0,width),getRandomInt(0,height));